<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>English Freetalk</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¤</text></svg>">
</head>
<body>
    <!-- API Key Modal -->
    <div class="modal" id="apiModal">
        <div class="modal-content">
            <h2>ğŸ”‘ Gemini API Key</h2>
            <p>ë¬´ë£Œ Gemini API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”.<br>
            <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a>ì—ì„œ ë¬´ë£Œë¡œ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <input type="text" id="apiKeyInput" placeholder="API í‚¤ ì…ë ¥...">
            <button class="modal-btn" onclick="saveApiKey()">ì‹œì‘í•˜ê¸°</button>
        </div>
    </div>

    <div class="container">
        <!-- Start Screen -->
        <div class="start-screen" id="startScreen">
            <h1>ğŸ¤ English Freetalk</h1>
            <p>Practice speaking English naturally!</p>
            <button class="start-btn" onclick="startConversation()">Start Conversation</button>
        </div>

        <!-- Main Screen -->
        <div class="main-screen" id="mainScreen">
            <!-- Status Bar -->
            <div class="status-bar" id="statusBar">Ready to start</div>

            <!-- Error Box (hidden by default) -->
            <div class="error-box hidden" id="errorBox"></div>

            <!-- Suggestions Section -->
            <div class="suggestions-section">
                <div class="suggestions-title">SUGGESTED RESPONSES</div>
                <div id="suggestionsList"></div>
            </div>

            <!-- Image Upload Section -->
            <div class="image-section">
                <div class="image-upload-area" id="imageUploadArea" onclick="document.getElementById('imageInput').click()">
                    <div class="upload-placeholder" id="uploadPlaceholder">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"/>
                        </svg>
                        <div>Tap to upload image</div>
                        <div style="font-size:11px; color:#bbb; margin-top:5px;">Max 10MB â€¢ JPG, PNG, GIF</div>
                    </div>
                    <div class="uploaded-image-container hidden" id="uploadedImageContainer">
                        <img id="uploadedImage" class="uploaded-image" src="" alt="Uploaded">
                        <button class="remove-image-btn" onclick="removeImage(event)">Ã—</button>
                    </div>
                </div>
                <input type="file" id="imageInput" accept="image/jpeg,image/png,image/gif" onchange="handleImageUpload(event)">
            </div>

            <!-- Conversation Section -->
            <div class="conversation-section">
                <div class="conversation-box" id="conversationBox">
                    <div style="color:#999; text-align:center;">ëŒ€í™”ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav hidden" id="bottomNav">
            <button class="nav-item" onclick="shareConversation()">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/>
                </svg>
                <span>Share</span>
            </button>
            <button class="nav-item active">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
                </svg>
                <span>Chat</span>
            </button>
            <div class="mic-container">
                <button class="mic-nav-btn" id="micBtn" onclick="toggleMic()">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V5zm6 6c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                    </svg>
                </button>
                <div class="mic-hint" id="micHint">íƒ­í•˜ì—¬ ë§í•˜ê¸°</div>
            </div>
            <button class="nav-item">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                </svg>
                <span>Preview</span>
            </button>
            <button class="nav-item" onclick="toggleMicEnabled()">
                <svg viewBox="0 0 24 24" fill="currentColor" id="micStateIcon">
                    <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.91-3c-.49 0-.9.36-.98.85C16.52 14.2 14.47 16 12 16s-4.52-1.8-4.93-4.15c-.08-.49-.49-.85-.98-.85-.61 0-1.09.54-1 1.14.49 3 2.89 5.35 5.91 5.78V21c0 .55.45 1 1 1s1-.45 1-1v-3.08c3.02-.43 5.42-2.78 5.91-5.78.1-.6-.39-1.14-1-1.14z"/>
                </svg>
                <span id="micStateText">Mic On</span>
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/speech.js"></script>
    <script src="js/gemini-api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
